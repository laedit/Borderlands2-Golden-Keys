@model  Borderlands2GoldendKeys.Models.HomeViewModel

<div class="well">
    <h1 class="defused">Borderlands 2: Golden Keys <small class="secret red">[unofficial]</small></h1>
    <div>
        This site has one and only purpose: list <a href="http://gearboxsoftware.com/" title="Official Gearbox site">gearbox</a>'s <a href="http://www.borderlands2.com" title="Official Borderlands 2 site">borderlands 2</a>'s golden keys from <a href="https://twitter.com/GearboxSoftware" title="Gearbox Software's Twitter">Twitter</a>.
    </div>
</div>

<div class="row">
    <div class="col-md-12 text-center">
        <blockquote>
            @Model.ClapTrapQuote.Quote
            <footer>
                ClapTrap
            </footer>
        </blockquote>
    </div>
</div>

<div>
    <table class="table table-striped table-hover text-center">
        <thead>
            <tr>
                <th class="text-center"><h4>Platform</h4></th>
                <th class="text-center"><h4>SHiFT Code</h4></th>
                <th class="text-center"><h4>Valid</h4></th>
                <th class="text-center"><h4>Source</h4></th>
            </tr>
        </thead>
        <tbody id="goldenKeys">
            @Html.Partial("_GoldenKeyRowPartial", Model.GoldenKeys)
        </tbody>
    </table>
    <div class="row text-center" id="showAllBlock">
        @using (Ajax.BeginForm("GetRemainingGoldenKeys", new AjaxOptions
        {
            InsertionMode = InsertionMode.InsertAfter,
            LoadingElementId = "ajaxLoader",
            UpdateTargetId = "goldenKeys",
            OnBegin = "ShowAllBegin",
            OnFailure = "ShowAllFailure",
            OnSuccess = "ShowAllSuccess"
        }))
        {
            <input type="submit" value="Show all" class="btn btn-default btn-sm" />
        }
        <img id="ajaxLoader" src="~/Content/images/ajax-loader.gif" class="hidden" />
        <div id="showAllError" class="hidden">An error occured...</div>
    </div>
</div>

<hr />

<div class="well">
    <div class="row text-center">
        <div class="col-md-4">
            This site is not affiliated to <a href="http://gearboxsoftware.com/" title="Official Gearbox site">Gearbox Software</a>
        </div>
        <div class="col-md-4">
            Borderlands 2 is property of <a href="http://gearboxsoftware.com/" title="Official Gearbox site">Gearbox Software</a>
        </div>
        <div class="col-md-4">
            <a href="https://twitter.com/GearboxSoftware" class="twitter-follow-button" data-show-count="false" data-dnt="true">Follow @@GearboxSoftware</a>
        </div>
    </div>
</div>

@section scripts
{
    <script type="text/javascript">
        $(document).ready(function () {
            InitializeTooltip();
        });

        function InitializeTooltip() {
            $('.validKey').tooltip();
        }
        
        function ShowAllSuccess() {
            $('#showAllBlock').hide();
            InitializeTooltip();
        }
        function ShowAllFailure() {
            $('#showAllError').show();
        }
        function ShowAllBegin() {
            $('#showAllError').hide();
        }
    </script>

    <script type="text/javascript">!function (d, s, id) { var js, fjs = d.getElementsByTagName(s)[0], p = /^http:/.test(d.location) ? 'http' : 'https'; if (!d.getElementById(id)) { js = d.createElement(s); js.id = id; js.src = p + '://platform.twitter.com/widgets.js'; fjs.parentNode.insertBefore(js, fjs); } }(document, 'script', 'twitter-wjs');</script>
}